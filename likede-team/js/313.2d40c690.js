"use strict";(self["webpackChunklikede"]=self["webpackChunklikede"]||[]).push([[313],{3313:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"goodstypepage"},[t("div",{staticClass:"goodspage"},[t("el-form",{staticClass:"titleform",staticStyle:{"line-height":"36px"},attrs:{inline:!0,"label-width":"70px"}},[t("el-form-item",{attrs:{label:"商品搜索"}},[t("el-input",{staticClass:"searchipt",attrs:{placeholder:"请输入"},model:{value:e.searchName,callback:function(t){e.searchName=t},expression:"searchName"}})],1),t("el-button",{staticClass:"searchbtn",attrs:{type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:e.search}},[e._v("查询")])],1)],1),t("div",{staticClass:"goodsbody"},[t("el-button",{staticClass:"addbtn",attrs:{type:"primary",icon:"el-icon-circle-plus"},on:{click:e.getItem}},[e._v("新建")]),t("el-dialog",{attrs:{title:"新增商品",visible:e.dialogVisible,width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-form",{ref:"form",attrs:{"label-width":"80px",model:e.itemForm,rules:e.rules}},[t("el-form-item",{attrs:{label:"商品名称",prop:"skuName","label-width":"140px"}},[t("el-input",{attrs:{maxlength:"15","show-word-limit":""},model:{value:e.itemForm.skuName,callback:function(t){e.$set(e.itemForm,"skuName",t)},expression:"itemForm.skuName"}})],1),t("el-form-item",{attrs:{label:"品牌",prop:"brandName","label-width":"140px"}},[t("el-input",{attrs:{maxlength:"10","show-word-limit":""},model:{value:e.itemForm.brandName,callback:function(t){e.$set(e.itemForm,"brandName",t)},expression:"itemForm.brandName"}})],1),t("div",{staticClass:"priceipt"},[t("el-form-item",{attrs:{label:"商品价格(元)",prop:"price","label-width":"140px"}},[t("el-input-number",{staticStyle:{width:"100%"},attrs:{"controls-position":"right",min:1,max:10,step:.5},model:{value:e.itemForm.price,callback:function(t){e.$set(e.itemForm,"price",t)},expression:"itemForm.price"}})],1)],1),t("el-form-item",{attrs:{label:"商品类型",prop:"type","label-width":"140px"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.itemForm.type,callback:function(t){e.$set(e.itemForm,"type",t)},expression:"itemForm.type"}},e._l(e.optionList,(function(e){return t("el-option",{key:e.classId,attrs:{label:e.className,value:e.className}})})),1)],1),t("el-form-item",{attrs:{label:"规格",prop:"unit","label-width":"140px"}},[t("el-input",{attrs:{maxlength:"10","show-word-limit":""},model:{value:e.itemForm.unit,callback:function(t){e.$set(e.itemForm,"unit",t)},expression:"itemForm.unit"}})],1),t("el-form-item",{attrs:{label:"商品图片",prop:"skuImage","label-width":"140px"}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://likede2-admin.itheima.net/likede/api/vm-service/sku/fileUpload","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload,name:"fileName"}},[e.imageUrl?t("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" 只能上传jpg/png文件，且不超过500kb ")])])],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{staticClass:"diaaddbtn",on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),t("el-button",{staticClass:"diacanbtn",attrs:{type:"primary"},on:{click:e.addGoodItem}},[e._v("确 定")])],1)],1),t("el-button",{staticClass:"importbtn",attrs:{type:"primary"},on:{click:function(t){e.dialogVisibleThree=!0}}},[e._v("导入数据")]),t("el-dialog",{staticStyle:{height:"600px"},attrs:{title:"数据导入",visible:e.dialogVisibleThree,width:"30%"},on:{"update:visible":function(t){e.dialogVisibleThree=t}}},[t("el-form",{attrs:{"label-width":"80px"}},[t("el-form-item",{attrs:{label:"标题:"}},[t("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"https://likede2-admin.itheima.net/likede/api/vm-service/sku/upload","on-preview":e.handlePreview,"on-remove":e.handleRemove,"auto-upload":!1,headers:e.MyHead,name:"fileName",accept:".xls,.xlsx"}},[t("el-button",{staticClass:"pickbtn el-icon-upload2",attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" 只能上传xls/xlsx文件，且不超过1M ")])],1)],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{staticClass:"diaaddbtn"},[e._v("取 消")]),t("el-button",{staticClass:"diacanbtn",attrs:{type:"primary"},on:{click:e.submitUpload}},[e._v("确 定")])],1)],1),[t("el-table",{staticClass:"mantable",staticStyle:{width:"100%","font-size":"14px"},attrs:{data:e.itemList,"header-cell-style":{background:"#f3f6fb"}}},[t("el-table-column",{attrs:{label:"序号",width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.$index+10*(e.pageIndex-1)+1)+" ")]}}])}),t("el-table-column",{attrs:{prop:"skuName",label:"商品名称",width:"140"}}),t("el-table-column",{attrs:{prop:"skuImage",label:"商品图片",width:"160"},scopedSlots:e._u([{key:"default",fn:function(e){return[t("img",{staticClass:"itemimg",attrs:{src:e.row.skuImage}})]}}])}),t("el-table-column",{attrs:{prop:"brandName",label:"品牌",width:"100"}}),t("el-table-column",{attrs:{prop:"unit",label:"规格"}}),t("el-table-column",{attrs:{prop:"price",label:"商品价格"}}),t("el-table-column",{attrs:{prop:"skuClass.className",label:"商品类型"}}),t("el-table-column",{attrs:{prop:"createTime",label:"创建日期"}}),t("el-table-column",{attrs:{prop:"address",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{staticStyle:{color:"#4368e6"},attrs:{type:"text"},on:{click:function(t){return e.editItem(a.row)}}},[e._v("修改")])]}}])})],1),t("el-pagination",{attrs:{"current-page":e.pageIndex,"page-size":e.pageSize,background:"",layout:"total,prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}}),t("el-dialog",{attrs:{title:"修改商品",visible:e.dialogVisibleTwo,width:"50%"},on:{"update:visible":function(t){e.dialogVisibleTwo=t}}},[t("el-form",{ref:"editform",attrs:{"label-width":"80px",model:e.editForm,rules:e.rules}},[t("el-form-item",{attrs:{label:"商品名称",prop:"skuName","label-width":"140px"}},[t("el-input",{attrs:{maxlength:"15","show-word-limit":""},model:{value:e.editForm.skuName,callback:function(t){e.$set(e.editForm,"skuName",t)},expression:"editForm.skuName"}})],1),t("el-form-item",{attrs:{label:"品牌",prop:"brandName","label-width":"140px"}},[t("el-input",{attrs:{maxlength:"10","show-word-limit":""},model:{value:e.editForm.brandName,callback:function(t){e.$set(e.editForm,"brandName",t)},expression:"editForm.brandName"}})],1),t("el-form-item",{attrs:{label:"商品价格(元)",prop:"price","label-width":"140px"}},[t("el-input-number",{staticStyle:{width:"100%"},attrs:{"controls-position":"right",min:1,max:10},model:{value:e.editForm.price,callback:function(t){e.$set(e.editForm,"price",t)},expression:"editForm.price"}})],1),t("el-form-item",{attrs:{label:"商品类型",prop:"type","label-width":"140px"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.editForm.type,callback:function(t){e.$set(e.editForm,"type",t)},expression:"editForm.type"}},e._l(e.optionList,(function(e){return t("el-option",{key:e.classId,attrs:{label:e.className,value:e.className}})})),1)],1),t("el-form-item",{attrs:{label:"规格",prop:"unit","label-width":"140px"}},[t("el-input",{attrs:{maxlength:"10","show-word-limit":""},model:{value:e.editForm.unit,callback:function(t){e.$set(e.editForm,"unit",t)},expression:"editForm.unit"}})],1),t("el-form-item",{attrs:{label:"商品图片",prop:"skuImage","label-width":"140px"}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://likede2-admin.itheima.net/likede/api/vm-service/sku/fileUpload","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload,name:"fileName"}},[e.imageUrl?t("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" 只能上传jpg/png文件，且不超过500kb ")])])],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{staticClass:"diaaddbtn",on:{click:function(t){e.dialogVisibleTwo=!1}}},[e._v("取 消")]),t("el-button",{staticClass:"diacanbtn",attrs:{type:"primary"},on:{click:e.editGoodItem}},[e._v("确 定")])],1)],1)]],2)])},s=[],l=a(3373),r={name:"SkuManagement",data(){return{MyHead:{accept:"application/json, text/plain",Authorization:this.$store.state.user.token},imageUrl:"",itemForm:{skuName:"",skuImage:"",price:0,classId:"",unit:"",brandName:"",type:""},editForm:{skuName:"",skuImage:"",price:0,classId:"",unit:"",brandName:"",type:""},rules:{skuName:[{required:!0,message:"请输入商品名称",trigger:["blur","change"]}],skuImage:[{required:!0,message:"请输入商品品牌",trigger:["blur","change"]}],price:[{required:!0,message:"请输入商品名称",trigger:["blur","change"]}],unit:[{required:!0,message:"请输入商品类型",trigger:["blur","change"]}],brandName:[{required:!0,message:"请输入商品规格",trigger:["blur","change"]}],type:[{required:!0,message:"请上传商品图片",trigger:["blur","change"]}]},num:1,dialogVisible:!1,dialogVisibleTwo:!1,dialogVisibleThree:!1,itemList:[],pageIndex:1,pageSize:10,total:0,optionList:[],searchName:""}},created(){this.getList()},methods:{handleCurrentChange(e){this.pageIndex=e,this.getList()},handleAvatarSuccess(e,t){this.imageUrl=URL.createObjectURL(t.raw),this.itemForm.skuImage=e},async getList(){const e=await(0,l.XX)({pageIndex:this.pageIndex,pageSize:this.pageSize});e.currentPageRecords.forEach((e=>{e.price=e.price/100,e.createTime=e.createTime.replace("T"," ")})),this.itemList=e.currentPageRecords,this.total=parseInt(e.totalCount)},async getItem(){this.dialogVisible=!0;const e=await(0,l.oo)({pageIndex:this.pageIndex,pageSize:this.pageSize});this.optionList=e.currentPageRecords},async addGoodItem(){this.$refs.form.validate(),this.itemForm.classId=this.optionList.filter((e=>this.itemForm.type===e.className))[0].classId;try{await(0,l.LP)(this.itemForm)}catch(e){console.log(e),this.$message.error(e.response.data)}this.$message.success("添加成功！"),this.dialogVisible=!1,this.$refs.form.resetFields()},async editItem(e){this.dialogVisibleTwo=!0,this.editForm.skuName=e.skuName,this.editForm.skuImage=e.skuImage,this.editForm.price=e.price,this.editForm.classId=e.classId,this.editForm.unit=e.unit,this.editForm.brandName=e.brandName,this.editForm.skuName=e.skuName;const t=await(0,l.oo)({pageIndex:this.pageIndex,pageSize:this.pageSize});this.optionList=t.currentPageRecords},async editGoodItem(){this.$refs.editform.validate();try{await(0,l.BC)(this.editForm,this.editForm.classId)}catch(e){this.$message.error(e.response.data)}this.getList(),this.dialogVisibleTwo=!1},beforeAvatarUpload(e){const t="image/jpeg"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a},async search(){const e={pageIndex:this.pageIndex,pageSize:this.pageSize,skuName:this.searchName},t=await(0,l.Ze)(e);console.log(t),this.itemList=t.currentPageRecords,this.pageIndex=parseInt(t.pageIndex),this.pageSize=parseInt(t.pageSize),this.totalPage=t.totalPage,this.total=parseInt(t.totalCount),console.log(this.itemList)},submitUpload(){this.$refs.upload.submit()},handleRemove(e,t){console.log(e,t)},handlePreview(e){console.log(e)}}},o=r,n=a(1001),c=(0,n.Z)(o,i,s,!1,null,"ed9f2ae2",null),m=c.exports},3373:function(e,t,a){a.d(t,{BC:function(){return p},IA:function(){return r},LP:function(){return m},R_:function(){return n},Rq:function(){return o},XX:function(){return c},Ze:function(){return d},kl:function(){return l},oo:function(){return s}});var i=a(471);const s=e=>i.Z.get("/api/vm-service/skuClass/search",{params:e}),l=e=>i.Z.get("/api/vm-service/skuClass/search",{params:e}),r=e=>i.Z["delete"](`/api/vm-service/skuClass/${e}`),o=e=>i.Z.post("/api/vm-service/skuClass",e),n=(e,t)=>i.Z.put(`/api/vm-service/skuClass/${e}`,t),c=e=>i.Z.get("/api/vm-service/sku/search",{params:e}),m=e=>i.Z.post("/api/vm-service/sku",e),p=(e,t)=>i.Z.put(`/api/vm-service/sku/${t}`,e),d=e=>i.Z.get("/api/vm-service/sku/search",{params:e})}}]);
//# sourceMappingURL=313.2d40c690.js.map