"use strict";(self["webpackChunklikede"]=self["webpackChunklikede"]||[]).push([[321],{321:function(t,e,s){s.r(e),s.d(e,{default:function(){return v}});var i=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:24}},[e("div",{staticClass:"top"},[e("el-form",{ref:"search",staticClass:"demo-form-inline",attrs:{inline:!0,model:t.form}},[e("el-form-item",{staticClass:"top_input_text",attrs:{label:"设备编号:",prop:"id"}},[e("el-input",{staticClass:"top_input",attrs:{placeholder:"请输入",size:"medium",clearable:""},model:{value:t.form.id,callback:function(e){t.$set(t.form,"id",t._n("string"===typeof e?e.trim():e))},expression:"form.id"}})],1),e("el-button",{staticClass:"top_button",attrs:{type:"primary",icon:"el-icon-search",size:"medium"},nativeOn:{click:function(e){return t.getDateS(t.form.id)}}},[t._v("搜索")])],1)],1)])],1),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:24}},[e("div",{staticClass:"bottom_top"},[e("el-button",{staticClass:"bottom_button_add",attrs:{type:"primary",size:"medium",icon:"el-icon-circle-plus-outline"},on:{click:t.chooseFn}},[t._v("新增")]),e("el-button",{staticClass:"bottom_button_do",on:{click:t.doMore}},[t._v("批量操作")])],1),e("div",{staticClass:"bottom_bottom"},[e("div",{staticClass:"bottom_bottom_tittle"},[e("span",{staticClass:"row_text"},[e("el-checkbox",{attrs:{indeterminate:t.isIndeterminate},on:{change:t.handleCheckAllChange},model:{value:t.checkAll,callback:function(e){t.checkAll=e},expression:"checkAll"}})],1),e("span",{staticClass:"row_text"},[t._v("序号")]),e("span",{staticClass:"row_text"},[t._v("设备编号")]),e("span",{staticClass:"row_text"},[t._v("设备型号")]),e("span",{staticClass:"row_text"},[t._v("详细地址")]),e("span",{staticClass:"row_text"},[t._v("合作商")]),e("span",{staticClass:"row_text"},[t._v("设备状态")]),e("span",{staticClass:"row_text"},[t._v("操作")])]),t.cities[0]?t._l(t.cities,(function(s,i){return e("div",{key:i,staticClass:"bottom_bottom_body"},[e("span",{staticClass:"row_text"},[e("el-checkbox-group",{on:{change:t.handleCheckedCitiesChange},model:{value:t.innerCodeList,callback:function(e){t.innerCodeList=e},expression:"innerCodeList"}},[e("el-checkbox",{attrs:{label:s.innerCode}},[e("br")])],1)],1),e("span",{staticClass:"row_text"},[t._v(t._s(i+1+10*(t.dataS.pageIndex-1)))]),e("span",{staticClass:"row_text"},[t._v(t._s(s.innerCode))]),e("span",{staticClass:"row_text"},[t._v(t._s(s.type?s.type.name:"这TM没数据,这后端真坑人"))]),e("span",{staticClass:"row_text"},[t._v(t._s(s.node.addr.replace(/.*-/,"")))]),e("span",{staticClass:"row_text"},[t._v(t._s(s.node.ownerName))]),e("span",{staticClass:"row_text"},[t._v(t._s(0===s.vmStatus?"未投放":1===s.vmStatus?"运营":3===s.vmStatus?"撤机":""))]),e("span",{staticClass:"row_text right"},[e("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.goodsAsideFn(s)}}},[t._v("货道")]),e("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.Policy(s)}}},[t._v("策略")]),e("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.changeDia(s)}}},[t._v("修改")])])])})):e("div",{staticClass:"bottom_bottom_body"},[e("div",[e("span",{staticClass:"none_text"},[t._v("暂无数据")])])]),t.cities[0]?e("div",{staticClass:"bottom_bottom_bottom"},[t.dataS.totalPage?[e("span",[e("span",{staticClass:"bottom_text"},[t._v("共"+t._s(t.dataS.totalCount)+"条记录")]),e("span",{staticClass:"bottom_text"},[t._v("第"+t._s(t.dataS.pageIndex)+"/"+t._s(t.dataS.totalPage)+"页")])])]:t._e(),e("span",[e("span",{staticClass:"button_all"},[e("el-button",{staticClass:"pre_button",style:"1"===t.dataS.pageIndex?"backgroundColor:#EAEDF8;color:#D3D9E0":"backgroundColor:#d6def6",attrs:{disabled:"1"===t.dataS.pageIndex,size:"medium"},on:{click:function(e){t.dataS.pageIndex--,t.getDateS()}}},[t._v("上一页")])],1),e("span",{staticClass:"button_all"},[e("el-button",{staticClass:"next_button",staticStyle:{"background-color":"#d6def6"},style:t.dataS.pageIndex===t.dataS.totalPage?"backgroundColor:#EAEDF8;color:#D3D9E0":"backgroundColor:#d6def6",attrs:{size:"medium",disabled:t.dataS.pageIndex===t.dataS.totalPage},on:{click:function(e){t.dataS.pageIndex++,t.getDateS()}}},[t._v("下一页")])],1)])],2):t._e()],2)])],1),e("el-dialog",{attrs:{title:"收货地址",visible:t.showBox,width:"630px",height:"300px"},on:{"update:visible":function(e){t.showBox=e}}},[e("el-form",{ref:"addDevice",attrs:{model:t.goodsAdd,rules:t.goodsRule}},[e("el-form-item",{attrs:{label:"设备编号:","label-width":t.formLabelWidth}},[e("span",[t._v("系统自动生成")])]),e("el-form-item",{attrs:{label:"选择型号",prop:"vmType","label-width":t.formLabelWidth}},[e("el-select",{staticClass:"chose_one",attrs:{placeholder:"请选择","popper-class":"list_top"},model:{value:t.goodsAdd.vmType,callback:function(e){t.$set(t.goodsAdd,"vmType",e)},expression:"goodsAdd.vmType"}},t._l(t.vmType,(function(t,s){return e("el-option",{key:s,attrs:{label:t.name,value:t.typeId}})})),1)],1),e("el-form-item",{attrs:{label:"选择策略",prop:"nodeId","label-width":t.formLabelWidth}},[e("el-select",{staticClass:"chose_two",attrs:{placeholder:"请选择"},model:{value:t.goodsAdd.nodeId,callback:function(e){t.$set(t.goodsAdd,"nodeId",e)},expression:"goodsAdd.nodeId"}},t._l(t.nodeID,(function(t,s){return e("el-option",{key:s,attrs:{"popper-class":"list_bottom",label:t.name,value:t.id}})})),1)],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{staticClass:"left",attrs:{size:"medium"},on:{click:function(e){t.showBox=!1,t.$refs.addDevice.resetFields()}}},[t._v("取消")]),e("el-button",{staticClass:"right",attrs:{type:"primary",size:"medium"},on:{click:t.addDeviceFn}},[t._v("确定")])],1)],1),e("el-dialog",{staticClass:"dialog_do",attrs:{title:"批量策略管理",visible:t.showBoxDo,width:"630px"},on:{"update:visible":function(e){t.showBoxDo=e}}},[e("el-form",{ref:"doMore",attrs:{model:t.boxChoose}},[e("el-form-item",{attrs:{label:"选择型号:",prop:"policyId","label-width":t.formLabelWidth}},[e("el-select",{staticClass:"chose_one",attrs:{placeholder:"请选择","popper-class":"list_top"},model:{value:t.boxChoose.policyId,callback:function(e){t.$set(t.boxChoose,"policyId",e)},expression:"boxChoose.policyId"}},t._l(t.policyList,(function(t,s){return e("el-option",{key:s,attrs:{label:t.policyName,value:t.policyId}})})),1)],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{staticClass:"left",attrs:{size:"medium"},on:{click:function(e){t.showBoxDo=!1,t.$refs.doMore.resetFields()}}},[t._v("取消")]),e("el-button",{staticClass:"right",attrs:{type:"primary",size:"medium"},on:{click:t.addDoMore}},[t._v("确定")])],1)],1),e("GoodAisle",{ref:"GAisle",attrs:{out:t.out,inner:t.inner},on:{"update:out":function(e){t.out=e},"update:inner":function(e){t.inner=e}}})],1)},a=[],o=(s(7658),function(){var t=this,e=t._self._c;return e("div",[e("el-dialog",{staticClass:"spec-dialog",staticStyle:{overflow:"hidden"},attrs:{title:"货道设置",width:"940px",visible:t.out,"close-on-click-modal":!1},on:{close:t.closeFn}},[e("div",[e("div",{staticClass:"top"},[e("span",[t._v("货道行数:"+t._s(t.volume.vmRow))]),e("span",[t._v("货道列数:"+t._s(t.volume.vmCol))]),e("span",[t._v("货道容量(个):"+t._s(t.volume.channelMaxCapacity))]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.$emit("update:inner",!0)}}},[t._v("智能排货")])],1),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.valueLoading,expression:"valueLoading"}],staticStyle:{"overflow-y":"scroll","overflow-x":"hidden",height:"390px",width:"850px","margin-left":"25px","-ms-overflow-style":"none"}},[e("span",{ref:"left_arrow",staticClass:"left_arrow",staticStyle:{color:"#000000"},on:{click:t.leftFn}},[e("el-icon",{class:{"el-icon-arrow-left":t.volume.vmCol>5}})],1),e("span",{ref:"right_arrow",staticClass:"right_arrow",staticStyle:{color:"#000000"},on:{click:t.rightFn}},[e("el-icon",{class:t.volume.vmCol>5?"el-icon-arrow-right":""})],1),e("div",{ref:"img_switch",staticClass:"bottom",staticStyle:{transform:"translateX(0px)"},style:t.volume.vmCol>5?"grid-template-columns: repeat(10, 10%); width: 1660px;":`grid-template-columns: repeat(${t.volume.vmCol}, 10%); width: 1660px;`},[t._l(t.Aisle,(function(s,i){return e("div",{key:s.channelId,staticClass:"img_card"},[e("span",{staticClass:"label"},[t._v(t._s(s.channelCode))]),e("img",{attrs:{src:s.sku?s.sku.skuImage||s.sku.image:t.img}}),e("br"),e("span",{staticClass:"text"},[t._v(t._s(s.sku?s.sku.skuName:"暂无商品"))]),e("span",{staticClass:"add_del"},[e("el-button",{attrs:{type:"text"},on:{click:function(e){t.getAddGoodsList(),t.addGood(i)}}},[t._v("添加")]),e("el-button",{style:s.sku?"color:red":"color:#F9DBDB",attrs:{type:"text",disabled:!s.sku},on:{click:function(e){return t.delImgFn(i)}}},[t._v("删除")])],1)])}))],2)])]),e("el-dialog",{staticClass:"inner_dialog",attrs:{width:"860px",title:"智能排货",visible:t.inner,"append-to-body":""},on:{close:function(e){return t.$emit("update:inner",!1)}}},[e("div",{staticClass:"inner_text_img"},[e("div",{staticClass:"inner_text"},[e("span",[t._v("该区域属于"+t._s(t.business)+"商圈适合销售一下商品：")])]),e("div",{staticClass:"inner_img"},[e("el-row",{attrs:{gutter:20}},t._l(t.adviceList,(function(s,i){return e("el-col",{key:i,staticClass:"card-panel-col",attrs:{span:5}},[e("div",{staticClass:"inner_img_img"},[e("img",{attrs:{src:s.image,alt:s.skuName}}),e("br"),e("span",{staticClass:"inner_img_text"},[t._v(t._s(s.skuName))])])])})),1)],1)]),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{staticClass:"button_confirm",on:{click:t.Confirmadvice}},[t._v("采纳建议")])],1)]),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{staticClass:"button_confirm",attrs:{type:"primary"},on:{click:t.putVmFn}},[t._v("确认")])],1)],1),e("el-dialog",{staticClass:"dialog_three",attrs:{title:"选择商品",width:"860px",visible:t.dialog_three,"close-on-click-modal":!1},on:{close:t.threeClose}},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.threeLoad,expression:"threeLoad"}],staticClass:"three"},[e("div",{staticClass:"three_top"},[e("el-form",{ref:"search",staticClass:"demo-form-inline",attrs:{inline:!0,model:t.form}},[e("el-form-item",{staticClass:"top_input_text",attrs:{label:"商品名称:",prop:"id"}},[e("el-input",{staticClass:"top_input",attrs:{placeholder:"请输入",size:"medium",clearable:""},on:{input:t.getAddGoodsList},model:{value:t.form.id,callback:function(e){t.$set(t.form,"id","string"===typeof e?e.trim():e)},expression:"form.id"}})],1),e("el-button",{staticClass:"top_button",attrs:{type:"primary",icon:"el-icon-search",size:"medium"},nativeOn:{click:function(e){return t.getDateS(t.form.id)}}},[t._v("查询")])],1)],1),t.AddGoodsList.currentPageRecords?e("div",{staticClass:"three_botom"},[e("el-row",{attrs:{gutter:20}},t._l(t.AddGoodsList.currentPageRecords,(function(s){return e("el-col",{key:s.skuI,staticClass:"card-panel-col",staticStyle:{cursor:"pointer"},attrs:{span:5},nativeOn:{click:function(e){return t.threeClick(s)}}},[e("div",{staticClass:"inner_img_img"},[s.discount?[e("img",{staticClass:"img_cheked",attrs:{src:t.isChecked,alt:""}})]:t._e(),e("img",{attrs:{src:s.skuImage}}),e("br"),e("span",{staticClass:"inner_img_text"},[t._v(t._s(s.skuName))])],2)])})),1),e("span",{staticClass:"three_left_arrow",style:"1"===t.AddGoodsList.pageIndex?"color:#D9DDE2;cursor:not-allowed;pointer-events:none":"color:#000000; ",on:{click:function(e){return t.addPageIndex(-1)}}},[e("el-icon",{staticClass:"el-icon-arrow-left"})],1),e("span",{staticClass:"three_right_arrow",style:t.AddGoodsList.pageIndex===t.AddGoodsList.totalPage?"color:#D9DDE2;cursor:not-allowed;pointer-events:none":"color:#000000;",on:{click:function(e){return t.addPageIndex(1)}}},[e("el-icon",{staticClass:"el-icon-arrow-right"})],1)],1):t._e()]),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{staticClass:"button_confirm",attrs:{type:"primary"},on:{click:t.threeConfirm}},[t._v("确认")])],1)]),e("el-dialog",{attrs:{title:"策略管理",visible:t.adviceDia,width:"630px"},on:{"update:visible":function(e){t.adviceDia=e},close:function(e){t.adviceDia=!1}}},[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.isPolicy,expression:"!isPolicy"}],staticClass:"NotPolicy"},[e("el-form",{ref:"doMore"},[e("el-form-item",{attrs:{label:"策略管理:"}},[e("el-select",{attrs:{placeholder:"请选择"},model:{value:t.policyValue.value,callback:function(e){t.$set(t.policyValue,"value",e)},expression:"policyValue.value"}},t._l(t.Policy,(function(t,s){return e("el-option",{key:s,attrs:{label:t.policyName,value:t.policyId}})})),1)],1)],1)],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isPolicy,expression:"isPolicy"}],staticClass:"NotPolicy"},[e("el-row",{staticStyle:{"margin-bottom":"20px"},attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[t._v("机器编号:"+t._s(t.isPolicy?t.isPolicy.vmId:""))]),e("el-col",{attrs:{span:12}},[t._v("策略编号:"+t._s(t.isPolicy?t.isPolicy.policyId:""))])],1),e("el-row",{staticStyle:{"margin-bottom":"20px"},attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[t._v("机器方案:"+t._s(t.isPolicy?t.isPolicy.discount>10?t.isPolicy.discount+"%":10*t.isPolicy.discount+"%":""))])],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.isPolicy,expression:"!isPolicy"}]},[e("el-button",{staticClass:"left",attrs:{size:"medium"},on:{click:t.policyCancel}},[t._v("取消")]),e("el-button",{staticClass:"right",attrs:{type:"primary",size:"medium"},on:{click:t.addPolicy}},[t._v("确定")])],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isPolicy,expression:"isPolicy"}]},[e("el-button",{staticClass:"left",attrs:{size:"medium"},on:{click:t.delpolicy}},[t._v("取消")])],1)])]),e("el-dialog",{attrs:{title:"修改设备",visible:t.changeDia,width:"630px"},on:{close:function(e){t.changeDia=!1}}},[t.changeItem.clientId?e("div",{staticClass:"changeItem"},[e("div",{staticClass:"div_margin"},[t._v(" 机器编号:"),e("span",[t._v(t._s(t.changeItem.innerCode?t.changeItem.innerCode:""))])]),e("div",{staticClass:"div_margin"},[t._v(" 供货时间:"),e("span",[t._v(t._s(t.changeItem.lastSupplyTime?t.changeItem.lastSupplyTime.replace(/-/g,".").replace("T"," "):""))])]),e("div",{staticClass:"div_margin"},[t._v(" 设备类型:"),e("span",[t._v(t._s(t.changeItem.type.name?t.changeItem.type.name:""))])]),e("div",{staticClass:"div_margin"},[t._v(" 设备容量:"),e("span",[t._v(t._s(t.changeItem.type.vmCol?t.changeItem.type.vmCol:""))])]),e("el-form",{ref:"doMore"},[e("el-form-item",{attrs:{label:"设备点位:"}},[e("el-select",{attrs:{placeholder:"请选择"},model:{value:t.changeSelect.value,callback:function(e){t.$set(t.changeSelect,"value",e)},expression:"changeSelect.value"}},t._l(t.changeOption,(function(t,s){return e("el-option",{key:s,attrs:{label:t.name,value:t.id}})})),1)],1)],1),e("div",{staticClass:"div_margin"},[t._v("    合作商:"),e("span",[t._v(t._s(t.changeItem.node.name?t.changeItem.node.ownerName:""))])]),e("div",{staticClass:"div_margin"},[t._v(" 所属区域:"),e("span",[t._v(t._s(t.changeItem.region.name))])]),e("div",{staticClass:"div_margin"},[t._v(" 设备地址:"),e("span",[t._v(t._s(t.changeItem.node.name))])])],1):t._e(),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{staticClass:"left",attrs:{size:"medium"},on:{click:t.changeCancel}},[t._v("取消")]),e("el-button",{staticClass:"right",attrs:{type:"primary",size:"medium"},on:{click:t.changeVmNode}},[t._v("确定")])],1)])],1)}),n=[],l=s(5427),r={props:{out:{type:Boolean,default:!1},inner:{type:Boolean,default:!1}},data(){return{Aisle:[],isChecked:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAACQ0lEQVRYR83YP2gTURzA8e8vTSwUEXRQcFHXTiJ10EFcOrQIHQodCiZRCy46uIWmaKSJHRyETBWhSa2IEMGKuAiCRXHWxUGcHAQHhwZqaJLeT15IRNPk8ufe5XLju/fnc793v/fenSxk9FhVeagwCYwR4KVCSuJp3VSYCdBRG9pgHiflrsTSujMMkTEYAzMgDTI6jcg0DFZBCiWBCnCom4dsxtiO0BcnzNRIhTMqvOgEaoWxBhLhfTnEzMFddssR3qly1g3UDmMHJDyXCpd3xqmMfWUTuNQvxgYoe6rKrVRKnHhGV1W57gXjBeSIkMgn5b7pJJbRJEraK6YlSOClwk9gAQi1GKQswpV8Up6ae9G0xoCcgLQDub0zzW32pX0oxMXcomzFl3VahQ3gyD+NthFm15Py1pTFMzqpymsgYgPTbso+/f7F+cIDKcVX9KTuUQAmUH6MKNNrt+VzHXNalS23NaeXyLgujAJr+SW5ZipNZXX0aJElJ8yjjYR8N2XzaT0RET6iHLcVmc4rdYir64uSax5wfkUPH9jjg8K4bYxrlpltwHE496Q+RabyzayOFou8AS74gemY9grfSmEmCgnZRlVi93iGMucXpiOoVgFeUSWqYZaBG35iugK5LXaNe/1kU7t+PR8/bGI8R8g2xhPID0zfIL8wfYH8xPQM8hvTE2gQmK5Bg8J0BRokpiNo0Bj33b7+rd3N1mGzTsutI4jItD2gBYnZN2VBY/4DDQPmL2hYMDVQNKN3Gj+LbGZLv339Abi3VpXvOoUQAAAAAElFTkSuQmCC",img:"data:image/png;base64,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",volume:{},valueLoading:!1,adviceList:[],business:"",dialog_three:!1,form:{id:""},AddGoodsList:{},indexPage:{},threeLoad:!1,checkItemThird:{},checkIndex:{},adviceDia:!1,chooseItem:{},Policy:[],policyValue:{value:""},isPolicy:null,changeDia:!1,changeItem:{},changeOption:[],changeSelect:{value:""}}},methods:{leftFn(){this.$refs.img_switch.style.transform="translateX(0px)",this.$refs.left_arrow.style.color="#D9DDE2",this.$refs.right_arrow.style.color="#000"},rightFn(){this.$refs.img_switch.style.transform="translateX(-830px)",this.$refs.right_arrow.style.color="#D9DDE2",this.$refs.left_arrow.style.color="#000"},async getAisle(t){const e=await(0,l.Ig)(t);this.Aisle=e},async getAisleRow(t){const e=await(0,l.C0)(t);this.volume=e},async sendItem(t){this.chooseItem=t,this.valueLoading=!0;try{await this.getAisleRow(t.vmType),await this.getAisle(t.innerCode),await this.getAllSort(t.businessId)}catch(e){console.log(e)}finally{this.valueLoading=!1}},closeFn(){this.$emit("update:out",!1),this.Aisle=[],this.volume={},this.leftFn()},async getAllSort(t){const e=await(0,l.tB)(t);this.business=e;const s=await(0,l.r$)(t);this.adviceList=s},Confirmadvice(){let t=0;this.Aisle.forEach((e=>{t!==this.adviceList.length&&(e.sku?e.sku.skuId===this.adviceList[t].skuId&&t++:(e.sku=this.adviceList[t],t++))})),this.$emit("update:inner",!1)},async putVmFn(){await(0,l.bq)(this.putVmFnForData()),this.$emit("update:out",!1),this.$parent.getDateS()},putVmFnForData(){const t={channelList:this.Aisle.map((t=>({channelCode:t.channelCode,skuId:t.sku?t.sku.skuId:"0"}))),innerCode:this.Aisle[0].innerCode};return t},async getAddGoodsList(t){this.dialog_three=!0,this.threeLoad=!0;let e={};if(""===t&&(this.indexPage.pageIndex="1",this.indexPage.pageSize="10"),t){const t={pageIndex:1,pageSize:10,skuName:this.form.id};e=await(0,l.xi)(t)}else e=await(0,l.xi)(this.indexPage);const{pageIndex:s,pageSize:i,totalCount:a,totalPage:o}=e;this.indexPage={pageIndex:s,pageSize:i,totalCount:a,totalPage:o},this.AddGoodsList=e,this.threeLoad=!1},async addPageIndex(t){if(this.dialog_three=!0,this.AddGoodsList.pageIndex===this.AddGoodsList.totalPage&&1===t|"1"===this.AddGoodsList.pageIndex)return;this.indexPage.pageIndex=String(Number(this.indexPage.pageIndex)+t);const e={pageIndex:this.indexPage.pageIndex,pageSize:10,skuName:this.form.id},s=await(0,l.xi)(e);this.AddGoodsList=s,this.threeLoad=!1},delImgFn(t){console.log(t),this.Aisle[t].sku=null},addGood(t){this.checkIndex=t},threeClose(){this.dialog_three=!1,this.form.id="",this.indexPage.pageIndex="1"},threeClick(t){this.AddGoodsList.currentPageRecords.forEach((t=>{t.discount=!1})),t.discount=!0,this.checkItemThird=t},threeConfirm(){this.Aisle[this.checkIndex].sku=this.checkItemThird,this.dialog_three=!1},async getPolicy(t){this.chooseItem=t;const e=await(0,l.h4)(t.innerCode);if(""===e){const e=await(0,l.SP)(t.innerCode);this.Policy=e}this.isPolicy=e},policyCancel(){this.adviceDia=!1,this.isPolicy="",this.policyValue.value=""},async addPolicy(){const t={innerCodeList:[this.chooseItem.innerCode],policyId:this.policyValue.value},e=await(0,l.u$)(t);this.$message.success(e?"操作成功":e),this.$parent.getDateS(),this.policyCancel()},async delpolicy(){const t={innerCodeList:this.chooseItem.innerCode,policyId:this.isPolicy.policyId},e=await(0,l.yl)(t);this.$message.success(e?"操作成功":e),this.adviceDia=!1,this.$parent.getDateS()},async changeItemData(t){this.changeItem=t,this.changeSelect.value=t.node.id;const e=await(0,l.rp)();this.changeOption=e.currentPageRecords},changeCancel(){this.changeDia=!1,this.changeItem={},this.changeOption=[],this.changeSelect.value=""},async changeVmNode(){const t={id:this.changeItem.id,nodeId:this.changeSelect.value};try{const e=await(0,l.K6)(t);console.log(e),this.$message.success("修改成功"),this.changeDia=!1}catch(e){this.$message.error(e.response.data)}}},created(){}},c=r,d=s(1001),u=(0,d.Z)(c,o,n,!1,null,"1d260c3e",null),h=u.exports,p={components:{GoodAisle:h},data(){return{form:{id:""},checkAll:!1,innerCodeList:[],cities:[],isIndeterminate:!1,dataS:{pageIndex:"0",pageSize:"",totalCount:"",totalPage:""},loading:!1,vmType:[],nodeID:[],showBox:!1,goodsAdd:{createUserId:1,nodeId:"",vmType:""},goodsRule:{vmType:[{required:!0,message:"请选择"}],nodeId:[{required:!0,message:"请选择"}]},formLabelWidth:"110px",showBoxDo:!1,boxChoose:{policyId:""},policyList:[],out:!1,inner:!1}},methods:{handleCheckAllChange(t){t&&this.cities.forEach((t=>{this.innerCodeList.includes(t.innerCode)||this.innerCodeList.push(t.innerCode)})),this.innerCodeList=t?this.innerCodeList:[],this.isIndeterminate=!1},handleCheckedCitiesChange(t){const e=t.length;this.checkAll=e===this.cities.length,this.isIndeterminate=e>0&&e<this.cities.length},async getDateS(t){this.loading=!0;let e=[];if(t){const s={pageIndex:1,pageSize:10,innerCode:t};e=await(0,l.on)(s)}else e=await(0,l.eF)(this.dataS);this.cities=e.currentPageRecords,this.dataS.pageIndex=e.pageIndex,this.dataS.pageSize=e.pageSize,this.dataS.totalPage=e.totalPage,this.dataS.totalCount=e.totalCount,this.innerCodeList=[],this.isIndeterminate=!1,this.checkAll=!1,this.loading=!1},async chooseFn(){this.showBox=!0;const t=await(0,l.SC)();this.vmType=t.currentPageRecords;const e=await(0,l.r7)();this.nodeID=e.currentPageRecords},async addDeviceFn(){await(0,l.S6)(this.goodsAdd),this.getDateS(),this.showBox=!1,this.$refs.search.resetFields(),this.$refs.addDevice.resetFields(),this.$message.success("新增成功")},async doMore(){if(!this.innerCodeList.length)return this.$message.warning("请勾选售货机");this.showBoxDo=!0;const t=await(0,l.SP)();this.getPolicy=t},async addDoMore(){const t={innerCodeList:this.innerCodeList,policyId:this.boxChoose.policyId};await(0,l.u$)(t),this.showBoxDo=!1,this.$refs.doMore.resetFields(),await this.getDateS(0),this.$message.success("操作成功")},goodsAsideFn(t){this.$refs.GAisle.sendItem(t),this.out=!0},Policy(t){this.$refs.GAisle.getPolicy(t),this.$refs.GAisle.adviceDia=!0},changeDia(t){this.$refs.GAisle.changeDia=!0,this.$refs.GAisle.changeItemData(t)}},async created(){await this.getDateS()}},m=p,g=(0,d.Z)(m,i,a,!1,null,"6af012e4",null),v=g.exports},5427:function(t,e,s){s.d(e,{$u:function(){return S},C0:function(){return u},Es:function(){return I},IZ:function(){return k},Ig:function(){return h},K6:function(){return _},MV:function(){return x},S6:function(){return r},SC:function(){return n},SP:function(){return c},Tz:function(){return A},b:function(){return D},bq:function(){return v},eF:function(){return a},fF:function(){return b},h4:function(){return f},i2:function(){return w},on:function(){return o},r$:function(){return p},r7:function(){return l},rp:function(){return y},tB:function(){return m},u$:function(){return d},xi:function(){return g},yl:function(){return C}});var i=s(471);const a=t=>i.Z.get("/api/vm-service/vm/search",{params:t}),o=t=>i.Z.get("/api/vm-service/vm/search",{params:t}),n=()=>i.Z.get("/api/vm-service/vmType/search",{params:{pageIndex:1,PageSize:1e5}}),l=()=>i.Z.get("/api/vm-service/node/search",{params:{pageIndex:1,PageSize:1e5}}),r=t=>i.Z.post("/api/vm-service/vm",t),c=()=>i.Z.get("/api/vm-service/policy"),d=t=>i.Z.put("/api/vm-service/vm/applyPolicy",t),u=t=>i.Z.get(`/api/vm-service/vmType/${t}`),h=t=>i.Z.get(`/api/vm-service/channel/channelList/${t}`),p=t=>i.Z.get(`/api/vm-service/sku/businessTop10/${t}`),m=t=>i.Z.get(`/api/vm-service/businessType/name/${t}`),g=t=>i.Z.get("/api/vm-service/sku/search",{params:t}),v=t=>i.Z.put("/api/vm-service/channel/channelConfig",t),f=t=>i.Z.get(`/api/vm-service/policy/vmPolicy/${t}`),C=t=>i.Z.put(`/api/vm-service/vm/cancelPolicy/${t.innerCodeList}/${t.policyId}`),y=()=>i.Z.get("/api/vm-service/node/search",{params:{pageIndex:1,pageSize:1e4}}),_=t=>i.Z.put(`/api/vm-service/vm/${t.id}/${t.nodeId}`),x=t=>i.Z.get(`/api/task-service/task/supplyCount/${t.innerCode}/${t.start}/${t.end}`),b=t=>i.Z.get(`/api/task-service/task/repairCount/${t.innerCode}/${t.start}/${t.end}`),w=t=>i.Z.get(`/api/order-service/report/skuCollect/${t.innerCode}/${t.start}/${t.end}`),I=t=>i.Z.get("/api/order-service/report/orderAmount",{params:t}),k=t=>i.Z.get("/api/order-service/report/orderCount",{params:t}),A=t=>i.Z.get("/api/vm-service/vmType/search",{params:t}),S=t=>i.Z.post("/api/vm-service/vmType",t),D=t=>i.Z.put(`/api/vm-service/vmType/${t.typeId}`,t)}}]);
//# sourceMappingURL=321.8fab1d36.js.map