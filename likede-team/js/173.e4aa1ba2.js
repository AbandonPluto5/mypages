"use strict";(self["webpackChunklikede"]=self["webpackChunklikede"]||[]).push([[173],{4173:function(t,e,a){a.r(e),a.d(e,{default:function(){return d}});var s=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:24}},[e("div",{staticClass:"top"},[e("el-form",{ref:"search",staticClass:"demo-form-inline",attrs:{inline:!0,model:t.form}},[e("el-form-item",{staticClass:"top_input_text",attrs:{label:"设备编号:",prop:"id"}},[e("el-input",{staticClass:"top_input",attrs:{placeholder:"请输入",size:"medium",clearable:""},model:{value:t.form.id,callback:function(e){t.$set(t.form,"id",t._n("string"===typeof e?e.trim():e))},expression:"form.id"}})],1),e("el-button",{staticClass:"top_button",attrs:{type:"primary",icon:"el-icon-search",size:"medium"},nativeOn:{click:function(e){return t.getDateS(t.form.id)}}},[t._v("搜索")])],1)],1)])],1),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:24}},[e("div",{staticClass:"bottom_top"}),e("div",{staticClass:"bottom_bottom"},[e("div",{staticClass:"bottom_bottom_tittle"},[e("span",{staticClass:"row_text"},[t._v("序号")]),e("span",{staticClass:"row_text"},[t._v("设备编号")]),e("span",{staticClass:"row_text"},[t._v("设备型号")]),e("span",{staticClass:"row_text"},[t._v("详细地址")]),e("span",{staticClass:"row_text"},[t._v("运营状态")]),e("span",{staticClass:"row_text"},[t._v("设备状态")]),e("span",{staticClass:"row_text"},[t._v("操作")])]),t.cities[0]?t._l(t.cities,(function(a,s){return e("div",{key:s,staticClass:"bottom_bottom_body"},[e("span",{staticClass:"row_text"},[t._v(t._s(s+1+10*(t.dataS.pageIndex-1)))]),e("span",{staticClass:"row_text"},[t._v(t._s(a.innerCode))]),e("span",{staticClass:"row_text"},[t._v(t._s(a.type?a.type.name:"这TM没数据,这后端真坑人"))]),e("span",{staticClass:"row_text"},[t._v(t._s(a.node.addr.replace(/.*-/,"")))]),e("span",{staticClass:"row_text"},[t._v(t._s(0===a.vmStatus?"未投放":1===a.vmStatus?"运营":3===a.vmStatus?"撤机":""))]),e("span",{staticClass:"row_text"},[e("span",{staticClass:"row_text_state_G"},[t._v(t._s(a.status["10001"]?"在线":"离线"))]),e("span",{staticClass:"row_text_state_On"},[t._v(t._s(a.status["10002"]?"货道":"离线"))]),e("span",{staticClass:"row_text_state_State"},[t._v(t._s(a.status["10003"]?"转动轴":"离线"))])]),e("span",{staticClass:"row_text right"},[e("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.getDetails(a.innerCode)}}},[t._v("查看详情")])])])})):e("div",{staticClass:"bottom_bottom_body"},[e("div",[e("span",{staticClass:"none_text"},[t._v("暂无数据")])])]),t.cities[0]?e("div",{staticClass:"bottom_bottom_bottom"},[t.dataS.totalPage?[e("span",[e("span",{staticClass:"bottom_text"},[t._v("共"+t._s(t.dataS.totalCount)+"条记录")]),e("span",{staticClass:"bottom_text"},[t._v("第"+t._s(t.dataS.pageIndex)+"/"+t._s(t.dataS.totalPage)+"页")])])]:t._e(),e("span",[e("span",{staticClass:"button_all"},[e("el-button",{staticClass:"pre_button",style:"1"===t.dataS.pageIndex?"backgroundColor:#EAEDF8;color:#D3D9E0":"backgroundColor:#d6def6",attrs:{disabled:"1"===t.dataS.pageIndex,size:"medium"},on:{click:function(e){t.dataS.pageIndex--,t.getDateS()}}},[t._v("上一页")])],1),e("span",{staticClass:"button_all"},[e("el-button",{staticClass:"next_button",staticStyle:{"background-color":"#d6def6"},style:t.dataS.pageIndex===t.dataS.totalPage?"backgroundColor:#EAEDF8;color:#D3D9E0":"backgroundColor:#d6def6",attrs:{size:"medium",disabled:t.dataS.pageIndex===t.dataS.totalPage},on:{click:function(e){t.dataS.pageIndex++,t.getDateS()}}},[t._v("下一页")])],1)])],2):t._e()],2)])],1),e("el-dialog",{attrs:{"close-on-click-modal":!1,width:"630px",title:"设备详情",visible:t.detailShow},on:{"update:visible":function(e){t.detailShow=e}}},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.detailLoading,expression:"detailLoading"}],staticClass:"top_detail"},[e("div",{staticClass:"body_detail_top"},[e("span",{staticClass:"text_one"},[t._v("销售量: "),e("span",{staticClass:"text_two"},[t._v(t._s(t.detailData.orderCount)+" "),e("span",{staticClass:"text_three"},[t._v("个")])])]),e("span",{staticClass:"text_one"},[t._v("销售额: "),e("span",{staticClass:"text_two"},[t._v(t._s((t.detailData.orderAmount/100).toFixed(2))+" "),e("span",{staticClass:"text_three"},[t._v("元")])])]),e("span",{staticClass:"text_one"},[t._v("补货次数: "),e("span",{staticClass:"text_two"},[t._v(t._s(t.detailData.repair)+" "),e("span",{staticClass:"text_three"},[t._v("次")])])]),e("span",{staticClass:"text_one"},[t._v("维修次数: "),e("span",{staticClass:"text_two"},[t._v(t._s(t.detailData.supply)),e("span",{staticClass:"text_three"},[t._v("次")])])])]),"0"!==t.detailData.orderCount?e("div",{staticClass:"body_detail_bottom"},[e("div",{staticClass:"body_detail_bottom_top"},[t._v("商品销量（月）")]),e("el-row",t._l(t.detailData.sku,(function(a,s){return e("el-col",{key:s,attrs:{span:6}},[e("span",{staticClass:"bottom_text_one"},[t._v(t._s(a.skuName))]),e("span",{staticClass:"bottom_text_two"},[t._v(":"+t._s(a.count))])])})),1)],1):e("div",{staticClass:"body_detail_bottom"},[e("div",{staticClass:"body_detail_bottom_top"},[t._v(" 商品销量（月） "),e("div",{staticClass:"no_data"},[t._v("当前设备未销售商品")])])])])])],1)},i=[],n=(a(7658),a(5427)),o={data(){return{form:{id:""},checkAll:!1,innerCodeList:[],cities:[],isIndeterminate:!1,dataS:{pageIndex:"0",pageSize:"",totalCount:"",totalPage:""},loading:!1,vmType:[],nodeID:[],showBox:!1,goodsAdd:{createUserId:1,nodeId:"",vmType:""},goodsRule:{vmType:[{required:!0,message:"请选择"}],nodeId:[{required:!0,message:"请选择"}]},formLabelWidth:"110px",detailShow:!1,detailData:{supply:"",repair:"",sku:[],orderAmount:"",orderCount:""},detailLoading:!1}},methods:{handleCheckAllChange(t){t&&this.cities.forEach((t=>{this.innerCodeList.includes(t.innerCode)||this.innerCodeList.push(t.innerCode)})),this.innerCodeList=t?this.innerCodeList:[],this.isIndeterminate=!1},handleCheckedCitiesChange(t){const e=t.length;this.checkAll=e===this.cities.length,this.isIndeterminate=e>0&&e<this.cities.length},async getDateS(t){this.loading=!0;let e=[];if(t){const a={pageIndex:1,pageSize:10,innerCode:t};e=await(0,n.on)(a)}else e=await(0,n.eF)(this.dataS);this.cities=e.currentPageRecords,this.dataS.pageIndex=e.pageIndex,this.dataS.pageSize=e.pageSize,this.dataS.totalPage=e.totalPage,this.dataS.totalCount=e.totalCount,this.innerCodeList=[],this.isIndeterminate=!1,this.checkAll=!1,this.loading=!1},async getDetails(t){this.detailLoading=!0;const e=new Date,a=e.getFullYear(),s=e.getMonth()+1,i=e.getDate();this.detailShow=!0;const o={innerCode:t,start:a+"-"+s+"-01",end:a+"-"+s+"-"+(i>9?i:"0"+String(i))},r={start:a+"-"+s+"-01 00:00:00",end:a+"-"+s+"-"+(i>9?i:"0"+String(i))+" 23:59:59",innerCode:t},l=await(0,n.MV)(o);this.detailData.supply=l;const c=await(0,n.fF)(o);this.detailData.repair=c;const d=await(0,n.i2)(o);this.detailData.sku=d;const p=await(0,n.Es)(r);this.detailData.orderAmount=p;const u=await(0,n.IZ)(r);this.detailData.orderCount=u,this.detailLoading=!1}},async created(){await this.getDateS()}},r=o,l=a(1001),c=(0,l.Z)(r,s,i,!1,null,"e472eae6",null),d=c.exports},5427:function(t,e,a){a.d(e,{$u:function(){return D},C0:function(){return p},Es:function(){return y},IZ:function(){return k},Ig:function(){return u},K6:function(){return x},MV:function(){return b},S6:function(){return l},SC:function(){return o},SP:function(){return c},Tz:function(){return I},b:function(){return Z},bq:function(){return C},eF:function(){return i},fF:function(){return S},h4:function(){return g},i2:function(){return w},on:function(){return n},r$:function(){return _},r7:function(){return r},rp:function(){return f},tB:function(){return v},u$:function(){return d},xi:function(){return m},yl:function(){return h}});var s=a(471);const i=t=>s.Z.get("/api/vm-service/vm/search",{params:t}),n=t=>s.Z.get("/api/vm-service/vm/search",{params:t}),o=()=>s.Z.get("/api/vm-service/vmType/search",{params:{pageIndex:1,PageSize:1e5}}),r=()=>s.Z.get("/api/vm-service/node/search",{params:{pageIndex:1,PageSize:1e5}}),l=t=>s.Z.post("/api/vm-service/vm",t),c=()=>s.Z.get("/api/vm-service/policy"),d=t=>s.Z.put("/api/vm-service/vm/applyPolicy",t),p=t=>s.Z.get(`/api/vm-service/vmType/${t}`),u=t=>s.Z.get(`/api/vm-service/channel/channelList/${t}`),_=t=>s.Z.get(`/api/vm-service/sku/businessTop10/${t}`),v=t=>s.Z.get(`/api/vm-service/businessType/name/${t}`),m=t=>s.Z.get("/api/vm-service/sku/search",{params:t}),C=t=>s.Z.put("/api/vm-service/channel/channelConfig",t),g=t=>s.Z.get(`/api/vm-service/policy/vmPolicy/${t}`),h=t=>s.Z.put(`/api/vm-service/vm/cancelPolicy/${t.innerCodeList}/${t.policyId}`),f=()=>s.Z.get("/api/vm-service/node/search",{params:{pageIndex:1,pageSize:1e4}}),x=t=>s.Z.put(`/api/vm-service/vm/${t.id}/${t.nodeId}`),b=t=>s.Z.get(`/api/task-service/task/supplyCount/${t.innerCode}/${t.start}/${t.end}`),S=t=>s.Z.get(`/api/task-service/task/repairCount/${t.innerCode}/${t.start}/${t.end}`),w=t=>s.Z.get(`/api/order-service/report/skuCollect/${t.innerCode}/${t.start}/${t.end}`),y=t=>s.Z.get("/api/order-service/report/orderAmount",{params:t}),k=t=>s.Z.get("/api/order-service/report/orderCount",{params:t}),I=t=>s.Z.get("/api/vm-service/vmType/search",{params:t}),D=t=>s.Z.post("/api/vm-service/vmType",t),Z=t=>s.Z.put(`/api/vm-service/vmType/${t.typeId}`,t)}}]);
//# sourceMappingURL=173.e4aa1ba2.js.map