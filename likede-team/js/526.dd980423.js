"use strict";(self["webpackChunklikede"]=self["webpackChunklikede"]||[]).push([[526],{7930:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var i=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:24}},[t("div",{staticClass:"top"},[t("el-form",{ref:"search",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.form}},[t("el-form-item",{staticClass:"top_input_text",attrs:{label:"设备编号:",prop:"id"}},[t("el-input",{staticClass:"top_input",attrs:{placeholder:"请输入",size:"medium",clearable:""},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",e._n("string"===typeof t?t.trim():t))},expression:"form.id"}})],1),t("el-button",{staticClass:"top_button",attrs:{type:"primary",icon:"el-icon-search",size:"medium"},nativeOn:{click:function(t){return e.getDateS(e.form.id)}}},[e._v("搜索")])],1)],1)])],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:24}},[t("div",{staticClass:"bottom_top"},[t("el-button",{staticClass:"bottom_button_add",attrs:{type:"primary",size:"medium",icon:"el-icon-circle-plus-outline"},on:{click:function(t){e.showAdd=!0}}},[e._v("新增")])],1),t("div",{staticClass:"bottom_bottom"},[t("div",{staticClass:"bottom_bottom_tittle"},[t("span",{staticClass:"row_text"},[e._v("序号")]),t("span",{staticClass:"row_text"},[e._v("型号名称")]),t("span",{staticClass:"row_text"},[e._v("型号编码")]),t("span",{staticClass:"row_text"},[e._v("设备图片")]),t("span",{staticClass:"row_text"},[e._v("货道行")]),t("span",{staticClass:"row_text"},[e._v("货道列")]),t("span",{staticClass:"row_text"},[e._v("设备容量")]),t("span",{staticClass:"row_text"},[e._v("操作")])]),e.cities[0]?e._l(e.cities,(function(a,i){return t("div",{key:i,staticClass:"bottom_bottom_body"},[t("span",{staticClass:"row_text"},[e._v(e._s(i+1))]),t("span",{staticClass:"row_text"},[e._v(e._s(a.name))]),t("span",{staticClass:"row_text"},[e._v(e._s(a.model))]),t("span",{staticClass:"row_text"},[t("img",{attrs:{src:a.image,alt:""}})]),t("span",{staticClass:"row_text"},[e._v(e._s(a.vmRow))]),t("span",{staticClass:"row_text"},[e._v(e._s(a.vmCol))]),t("span",{staticClass:"row_text"},[e._v(e._s(a.channelMaxCapacity))]),t("span",{staticClass:"row_text right"},[t("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.eidtVmType(a)}}},[e._v("修改")]),t("a",{staticStyle:{color:"red","margin-left":"10px"},attrs:{href:"javascript:;"},on:{click:function(t){return e.$notify.info({title:"提示",message:"演示系统，不支持此操作",iconClass:"color_message"})}}},[e._v("删除")])])])})):t("div",{staticClass:"bottom_bottom_body"},[t("div",[t("span",{staticClass:"none_text"},[e._v("暂无数据")])])]),e.cities[0]?t("div",{staticClass:"bottom_bottom_bottom"},[e.dataS.totalPage?[t("span",[t("span",{staticClass:"bottom_text"},[e._v("共"+e._s(e.dataS.totalCount)+"条记录")]),t("span",{staticClass:"bottom_text"},[e._v("第"+e._s(e.dataS.pageIndex)+"/"+e._s(e.dataS.totalPage)+"页")])])]:e._e(),t("span",[t("span",{staticClass:"button_all"},[t("el-button",{staticClass:"pre_button",style:"1"===e.dataS.pageIndex?"backgroundColor:#EAEDF8;color:#D3D9E0":"backgroundColor:#d6def6",attrs:{disabled:"1"===e.dataS.pageIndex,size:"medium"},on:{click:function(t){e.dataS.pageIndex--,e.getDateS()}}},[e._v("上一页")])],1),t("span",{staticClass:"button_all"},[t("el-button",{staticClass:"next_button",staticStyle:{"background-color":"#d6def6"},style:e.dataS.pageIndex===e.dataS.totalPage?"backgroundColor:#EAEDF8;color:#D3D9E0":"backgroundColor:#d6def6",attrs:{size:"medium",disabled:e.dataS.pageIndex===e.dataS.totalPage},on:{click:function(t){e.dataS.pageIndex++,e.getDateS()}}},[e._v("下一页")])],1)])],2):e._e()],2)])],1),t("el-dialog",{attrs:{title:"新增设备类型",visible:e.showAdd,width:"630px",height:"300px"},on:{"update:visible":function(t){e.showAdd=t},close:e.clearFn}},[t("div",{staticClass:"add_form"},[t("el-form",{ref:"addType",attrs:{"label-width":"80px",model:e.formTypeAdd,rules:e.formRules}},[t("el-form-item",{attrs:{label:"型号名称",prop:"name"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.formTypeAdd.name,callback:function(t){e.$set(e.formTypeAdd,"name",t)},expression:"formTypeAdd.name"}})],1),t("el-form-item",{attrs:{label:"型号遍码",prop:"model"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.formTypeAdd.model,callback:function(t){e.$set(e.formTypeAdd,"model",t)},expression:"formTypeAdd.model"}})],1),t("el-form-item",{attrs:{label:"货道行数",prop:"vmRow"}},[t("el-input-number",{attrs:{"controls-position":"right",min:0,max:10,placeholder:"请输入"},model:{value:e.formTypeAdd.vmRow,callback:function(t){e.$set(e.formTypeAdd,"vmRow",t)},expression:"formTypeAdd.vmRow"}})],1),t("el-form-item",{attrs:{label:"货道列数",prop:"vmCol"}},[t("el-input-number",{attrs:{"controls-position":"right",min:0,max:10,placeholder:"请输入"},model:{value:e.formTypeAdd.vmCol,callback:function(t){e.$set(e.formTypeAdd,"vmCol",t)},expression:"formTypeAdd.vmCol"}})],1),t("el-form-item",{attrs:{label:"货道容量",prop:"channelMaxCapacity"}},[t("el-input-number",{attrs:{"controls-position":"right",min:0,max:10,placeholder:"请输入"},model:{value:e.formTypeAdd.channelMaxCapacity,callback:function(t){e.$set(e.formTypeAdd,"channelMaxCapacity",t)},expression:"formTypeAdd.channelMaxCapacity"}})],1),t("el-form-item",{attrs:{label:"设备图片",prop:"image"}},[t("el-upload",{ref:"upImg",attrs:{action:"http://likede2-admin.itheima.net/likede/api/vm-service/sku/fileUpload","list-type":"picture-card","auto-upload":!0,name:"fileName","on-success":e.imgDate},scopedSlots:e._u([{key:"file",fn:function({file:a}){return t("div",{},[t("img",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:a.url,alt:""}}),t("span",{staticClass:"el-upload-list__item-actions"},[e.disabled?e._e():t("span",{staticClass:"el-upload-list__item-delete",on:{click:function(t){return e.handleDel(a)}}},[t("i",{staticClass:"el-icon-delete"})])])])}}])},[t("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"})])],1)],1),t("div",{staticClass:"bottom_text_add"},[e._v("支持扩展名：jpg、png，文件不得大于100kb")])],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{staticClass:"left",attrs:{size:"medium"},on:{click:e.clearFn}},[e._v("取消")]),t("el-button",{staticClass:"right",attrs:{type:"primary",size:"medium"},on:{click:e.addVmType}},[e._v("确定")])],1)]),t("el-dialog",{attrs:{title:"新增设备类型",visible:e.showEdit,width:"630px",height:"300px"},on:{"update:visible":function(t){e.showEdit=t},close:e.clearFn2}},[t("div",{staticClass:"add_form"},[t("el-form",{ref:"editType",attrs:{"label-width":"80px",model:e.formTypeEdit,rules:e.formRulesEdit},on:{close:e.clearFn2}},[t("el-form-item",{attrs:{label:"型号名称",prop:"name"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.formTypeEdit.name,callback:function(t){e.$set(e.formTypeEdit,"name",t)},expression:"formTypeEdit.name"}})],1),t("el-form-item",{attrs:{label:"型号遍码",prop:"model"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.formTypeEdit.model,callback:function(t){e.$set(e.formTypeEdit,"model",t)},expression:"formTypeEdit.model"}})],1),t("el-form-item",{attrs:{label:"货道行数",prop:"vmRow"}},[t("el-input-number",{attrs:{"controls-position":"right",min:0,max:10,placeholder:"请输入"},model:{value:e.formTypeEdit.vmRow,callback:function(t){e.$set(e.formTypeEdit,"vmRow",t)},expression:"formTypeEdit.vmRow"}})],1),t("el-form-item",{attrs:{label:"货道列数",prop:"vmCol"}},[t("el-input-number",{attrs:{"controls-position":"right",min:0,max:10,placeholder:"请输入"},model:{value:e.formTypeEdit.vmCol,callback:function(t){e.$set(e.formTypeEdit,"vmCol",t)},expression:"formTypeEdit.vmCol"}})],1),t("el-form-item",{attrs:{label:"货道容量",prop:"channelMaxCapacity"}},[t("el-input-number",{attrs:{"controls-position":"right",min:0,max:10,placeholder:"请输入"},model:{value:e.formTypeEdit.channelMaxCapacity,callback:function(t){e.$set(e.formTypeEdit,"channelMaxCapacity",t)},expression:"formTypeEdit.channelMaxCapacity"}})],1),t("el-form-item",{attrs:{label:"设备图片",prop:"image"}},[t("el-upload",{ref:"editImg",attrs:{action:"http://likede2-admin.itheima.net/likede/api/vm-service/sku/fileUpload","list-type":"picture-card","auto-upload":!0,name:"fileName","on-success":e.imgDate,"file-list":e.fileList},scopedSlots:e._u([{key:"file",fn:function({file:a}){return t("div",{},[t("img",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:a.url,alt:""}}),t("span",{staticClass:"el-upload-list__item-actions"},[e.disabled?e._e():t("span",{staticClass:"el-upload-list__item-delete",on:{click:function(t){return e.handleDel(a)}}},[t("i",{staticClass:"el-icon-delete"})])])])}}])},[t("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"})])],1)],1),t("div",{staticClass:"bottom_text_add"},[e._v("支持扩展名：jpg、png，文件不得大于100kb")])],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{staticClass:"left",attrs:{size:"medium"},on:{click:e.clearFn2}},[e._v("取消")]),t("el-button",{staticClass:"right",attrs:{type:"primary",size:"medium"},on:{click:e.eidtVmTypePut}},[e._v("确定")])],1)])],1)},s=[],o=(a(7658),a(5427)),l={data(){return{form:{id:""},checkAll:!1,innerCodeList:[],cities:[],isIndeterminate:!1,dataS:{pageIndex:"0",pageSize:"",totalCount:"",totalPage:""},loading:!1,showAdd:!1,showEdit:!1,formTypeAdd:{name:"",model:"",vmRow:"",vmCol:"",channelMaxCapacity:"",image:""},formRules:{name:[{required:!0,message:"请输入设备名"}],model:[{required:!0,message:"请输入设备编码"}],vmRow:[{required:!0,message:"请输入设备行数"}],vmCol:[{required:!0,message:"请输入设备列数"}],channelMaxCapacity:[{required:!0,message:"请输入设备最大容量"}],image:[{required:!0,message:"请上传突破"}]},formTypeEdit:{name:"",model:"",vmRow:"",vmCol:"",channelMaxCapacity:"",image:"",typeId:""},fileList:["1"],formRulesEdit:{name:[{required:!0,message:"请输入设备名"}],model:[{required:!0,message:"请输入设备编码"}],vmRow:[{required:!0,message:"请输入设备行数"}],vmCol:[{required:!0,message:"请输入设备列数"}],channelMaxCapacity:[{required:!0,message:"请输入设备最大容量"}],image:[{required:!0,message:"请上传突破"}]},dialogImageUrl:"",dialogVisible:!1,disabled:!1}},methods:{handleCheckAllChange(e){e&&this.cities.forEach((e=>{this.innerCodeList.includes(e.innerCode)||this.innerCodeList.push(e.innerCode)})),this.innerCodeList=e?this.innerCodeList:[],this.isIndeterminate=!1},handleCheckedCitiesChange(e){const t=e.length;this.checkAll=t===this.cities.length,this.isIndeterminate=t>0&&t<this.cities.length},async getDateS(e){this.loading=!0;let t=[];if(e){const a={pageIndex:1,pageSize:10,name:e};t=await(0,o.Tz)(a)}else t=await(0,o.Tz)(this.dataS);this.cities=t.currentPageRecords,this.dataS.pageIndex=t.pageIndex,this.dataS.pageSize=t.pageSize,this.dataS.totalPage=t.totalPage,this.dataS.totalCount=t.totalCount,this.innerCodeList=[],this.isIndeterminate=!1,this.checkAll=!1,this.loading=!1},async addVmType(){try{const e=await(0,o.$u)(this.formTypeAdd);console.log(e),e&&(this.$message.success("添加成功"),this.clearFn())}catch(e){this.$message.error(e.response.data)}},handleDel(e){this.$refs.upImg.clearFiles()},imgDate(e){this.formTypeAdd.image=e},clearFn(){this.showAdd=!1,this.formTypeAdd={name:"",model:"",vmRow:"",vmCol:"",channelMaxCapacity:"",image:""},this.$refs.addType.resetFields(),this.$refs.upImg.clearFiles()},clearFn2(){this.showEdit=!1,this.formTypeEdit={name:"",model:"",vmRow:"",vmCol:"",channelMaxCapacity:"",image:"",typeId:""},this.$refs.editType.resetFields(),this.$refs.editImg.clearFiles()},eidtVmType(e){console.log(e),this.showEdit=!0,this.formTypeEdit.typeId=e.typeId,this.formTypeEdit.name=e.name,this.formTypeEdit.model=e.model,this.formTypeEdit.vmRow=e.vmRow,this.formTypeEdit.vmCol=e.vmCol,this.formTypeEdit.channelMaxCapacity=e.channelMaxCapacity,this.formTypeEdit.image=e.image,console.log(this.formTypeEdit.image)},async eidtVmTypePut(){try{const e=await(0,o.b)(this.formTypeEdit);console.log(e),e&&(this.$message.success("添加成功"),this.clearFn2())}catch(e){this.$message.error(e.response.data)}}},async created(){await this.getDateS()}},r=l,n=a(1001),c=(0,n.Z)(r,i,s,!1,null,"4f0b13f2",null),d=c.exports},5427:function(e,t,a){a.d(t,{$u:function(){return E},C0:function(){return m},Es:function(){return k},IZ:function(){return w},Ig:function(){return p},K6:function(){return _},MV:function(){return b},S6:function(){return n},SC:function(){return l},SP:function(){return c},Tz:function(){return $},b:function(){return S},bq:function(){return h},eF:function(){return s},fF:function(){return x},h4:function(){return g},i2:function(){return T},on:function(){return o},r$:function(){return u},r7:function(){return r},rp:function(){return y},tB:function(){return f},u$:function(){return d},xi:function(){return v},yl:function(){return C}});var i=a(471);const s=e=>i.Z.get("/api/vm-service/vm/search",{params:e}),o=e=>i.Z.get("/api/vm-service/vm/search",{params:e}),l=()=>i.Z.get("/api/vm-service/vmType/search",{params:{pageIndex:1,PageSize:1e5}}),r=()=>i.Z.get("/api/vm-service/node/search",{params:{pageIndex:1,PageSize:1e5}}),n=e=>i.Z.post("/api/vm-service/vm",e),c=()=>i.Z.get("/api/vm-service/policy"),d=e=>i.Z.put("/api/vm-service/vm/applyPolicy",e),m=e=>i.Z.get(`/api/vm-service/vmType/${e}`),p=e=>i.Z.get(`/api/vm-service/channel/channelList/${e}`),u=e=>i.Z.get(`/api/vm-service/sku/businessTop10/${e}`),f=e=>i.Z.get(`/api/vm-service/businessType/name/${e}`),v=e=>i.Z.get("/api/vm-service/sku/search",{params:e}),h=e=>i.Z.put("/api/vm-service/channel/channelConfig",e),g=e=>i.Z.get(`/api/vm-service/policy/vmPolicy/${e}`),C=e=>i.Z.put(`/api/vm-service/vm/cancelPolicy/${e.innerCodeList}/${e.policyId}`),y=()=>i.Z.get("/api/vm-service/node/search",{params:{pageIndex:1,pageSize:1e4}}),_=e=>i.Z.put(`/api/vm-service/vm/${e.id}/${e.nodeId}`),b=e=>i.Z.get(`/api/task-service/task/supplyCount/${e.innerCode}/${e.start}/${e.end}`),x=e=>i.Z.get(`/api/task-service/task/repairCount/${e.innerCode}/${e.start}/${e.end}`),T=e=>i.Z.get(`/api/order-service/report/skuCollect/${e.innerCode}/${e.start}/${e.end}`),k=e=>i.Z.get("/api/order-service/report/orderAmount",{params:e}),w=e=>i.Z.get("/api/order-service/report/orderCount",{params:e}),$=e=>i.Z.get("/api/vm-service/vmType/search",{params:e}),E=e=>i.Z.post("/api/vm-service/vmType",e),S=e=>i.Z.put(`/api/vm-service/vmType/${e.typeId}`,e)}}]);
//# sourceMappingURL=526.dd980423.js.map